# 区間の交差（Interval Intersection）

## 問題

```php
function solution(array $firstList, array $secondList): array {
}
```

2つの**ソート済み**区間リスト `$firstList` と `$secondList` が与えられます。

これらの区間リストの**交差部分**をすべて求めて返してください。

結果は開始時間でソートして返してください。

## 例

### 例1
```
入力: firstList = [[0,2], [5,10], [13,23], [24,25]]
       secondList = [[1,5], [8,12], [15,24], [25,26]]
出力: [[1,2], [5,5], [8,10], [15,23], [24,24], [25,25]]
```

**解説**:
- `[0,2]` ∩ `[1,5]` = `[1,2]`
- `[5,10]` ∩ `[1,5]` = `[5,5]`
- `[5,10]` ∩ `[8,12]` = `[8,10]`
- `[13,23]` ∩ `[15,24]` = `[15,23]`
- `[24,25]` ∩ `[15,24]` = `[24,24]`
- `[24,25]` ∩ `[25,26]` = `[25,25]`

### 例2
```
入力: firstList = [[1,3], [5,9]]
       secondList = []
出力: []
```

### 例3
```
入力: firstList = [[1,7]]
       secondList = [[3,10]]
出力: [[3,7]]
```

### 例4
```
入力: firstList = [[1,3], [5,7], [9,11]]
       secondList = [[2,4], [6,8], [10,12]]
出力: [[2,3], [6,7], [10,11]]
```

### 例5
```
入力: firstList = [[1,5]]
       secondList = [[2,3]]
出力: [[2,3]]
```

**解説**: 一方が完全に含まれる場合

### 例6
```
入力: firstList = [[1,2], [5,6]]
       secondList = [[3,4], [7,8]]
出力: []
```

**解説**: 交差なし

### 例7
```
入力: firstList = [[0,5]]
       secondList = [[0,5]]
出力: [[0,5]]
```

**解説**: 完全一致

## 制約

```
0 <= count($firstList), count($secondList) <= 1000
両リストともソート済み（開始点の昇順）
各リスト内の区間同士は重複していない
0 <= start <= end <= 10000
```

## ヒント

### 交差の計算

2つの区間 `[a, b]` と `[c, d]` の交差:
- 交差の開始点: `max(a, c)`
- 交差の終了点: `min(b, d)`
- 交差が存在する条件: `max(a, c) <= min(b, d)`

```
[a=1, b=5] ∩ [c=3, d=7]
= [max(1,3), min(5,7)]
= [3, 5]
```

### アルゴリズム: Two Pointers

両リストがソート済みなので、Two Pointers で効率的に解ける。

```
i = 0, j = 0  // 各リストのポインタ

while i < len(firstList) and j < len(secondList):
    [a, b] = firstList[i]
    [c, d] = secondList[j]

    // 交差を計算
    start = max(a, c)
    end = min(b, d)

    if start <= end:
        result.add([start, end])

    // 終了点が小さい方のポインタを進める
    if b < d:
        i++
    else:
        j++

return result
```

### ポインタを進める理由

終了点が小さい区間は、これ以上次の区間と交差する可能性がない。

```
firstList:  [1,5]  [7,10]
secondList: [3,8]  [9,12]

[1,5] ∩ [3,8] = [3,5]
5 < 8 なので、firstList のポインタを進める
[7,10] ∩ [3,8] = [7,8]
8 < 10 なので、secondList のポインタを進める
...
```

### 計算量

- 時間: O(N + M)
- 空間: O(N + M) ← 結果の配列
