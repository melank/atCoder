<?php

$GLOBALS['TESTING'] = true;
require_once __DIR__ . '/../main.php';

function runTests(): void {
    // æ‰‹è¨ˆç®—ã§æ¤œè¨¼æ¸ˆã¿ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
    $testCases = [
        [
            'name' => 'åŸºæœ¬ã‚±ãƒ¼ã‚¹: 1 2 3 4',
            'input' => [1, 2, 3, 4],
            'expected' => [24, 12, 8, 6],
            // i=0: 2*3*4=24, i=1: 1*3*4=12, i=2: 1*2*4=8, i=3: 1*2*3=6
        ],
        [
            'name' => '0ã‚’å«ã‚€: -1 1 0 -3 3',
            'input' => [-1, 1, 0, -3, 3],
            'expected' => [0, 0, 9, 0, 0],
            // i=2ä»¥å¤–ã¯0ã‚’å«ã‚€ã®ã§0ã€i=2: (-1)*1*(-3)*3=9
        ],
        [
            'name' => '2è¦ç´ : 3 5',
            'input' => [3, 5],
            'expected' => [5, 3],
            // i=0: 5, i=1: 3
        ],
        [
            'name' => 'åŒã˜å€¤: 2 2 2',
            'input' => [2, 2, 2],
            'expected' => [4, 4, 4],
            // ã™ã¹ã¦ 2*2=4
        ],
        [
            'name' => 'æ­£è² äº¤äº’: 1 -1 1 -1',
            'input' => [1, -1, 1, -1],
            'expected' => [1, -1, 1, -1],
            // i=0: (-1)*1*(-1)=1, i=1: 1*1*(-1)=-1, i=2: 1*(-1)*(-1)=1, i=3: 1*(-1)*1=-1
        ],
        [
            'name' => '0ãŒ2ã¤',
            'input' => [0, 0, 1],
            'expected' => [0, 0, 0],
            // ã™ã¹ã¦ã®ä½ç½®ã§å°‘ãªãã¨ã‚‚1ã¤ã®0ã‚’å«ã‚€ã®ã§å…¨ã¦0
        ],
        [
            'name' => '0ãŒ1ã¤ï¼ˆå…ˆé ­ï¼‰',
            'input' => [0, 2, 3],
            'expected' => [6, 0, 0],
            // i=0: 2*3=6, i=1ã¨i=2ã¯0ã‚’å«ã‚€ã®ã§0
        ],
        [
            'name' => '0ãŒ1ã¤ï¼ˆæœ«å°¾ï¼‰',
            'input' => [2, 3, 0],
            'expected' => [0, 0, 6],
            // i=0ã¨i=1ã¯0ã‚’å«ã‚€ã®ã§0ã€i=2: 2*3=6
        ],
        [
            'name' => 'è² ã®æ•°ã®ã¿',
            'input' => [-2, -3, -4],
            'expected' => [12, 8, 6],
            // i=0: (-3)*(-4)=12, i=1: (-2)*(-4)=8, i=2: (-2)*(-3)=6
        ],
        [
            'name' => '1ã®ã¿',
            'input' => [1, 1, 1, 1],
            'expected' => [1, 1, 1, 1],
            // ã™ã¹ã¦ 1*1*1=1
        ],
        [
            'name' => 'å¤§ããªå€¤',
            'input' => [10, 20, 30],
            'expected' => [600, 300, 200],
            // i=0: 20*30=600, i=1: 10*30=300, i=2: 10*20=200
        ],
        [
            'name' => '5è¦ç´ ',
            'input' => [1, 2, 3, 4, 5],
            'expected' => [120, 60, 40, 30, 24],
            // i=0: 2*3*4*5=120, i=1: 1*3*4*5=60, i=2: 1*2*4*5=40, i=3: 1*2*3*5=30, i=4: 1*2*3*4=24
        ],
    ];

    $passed = 0;
    $failed = 0;

    echo "=== è‡ªåˆ†ä»¥å¤–ã®ç© ãƒ†ã‚¹ãƒˆ ===\n\n";

    foreach ($testCases as $testCase) {
        $result = solution($testCase['input']);
        $isPass = $result === $testCase['expected'];

        if ($isPass) {
            echo "âœ… PASS: {$testCase['name']}\n";
            $passed++;
        } else {
            echo "âŒ FAIL: {$testCase['name']}\n";
            echo "   å…¥åŠ›: [" . implode(', ', $testCase['input']) . "]\n";
            echo "   æœŸå¾…å€¤: [" . implode(', ', $testCase['expected']) . "]\n";
            echo "   å®Ÿéš›ã®å€¤: [" . implode(', ', $result) . "]\n";
            $failed++;
        }
    }

    echo "\n=== çµæœ ===\n";
    echo "åˆè¨ˆ: " . count($testCases) . " ãƒ†ã‚¹ãƒˆ\n";
    echo "æˆåŠŸ: {$passed}\n";
    echo "å¤±æ•—: {$failed}\n";

    if ($failed === 0) {
        echo "\nğŸ‰ ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã«åˆæ ¼ã—ã¾ã—ãŸï¼\n";
    } else {
        echo "\nâš ï¸  {$failed} å€‹ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ã¦ã„ã¾ã™ã€‚\n";
    }
}

runTests();
