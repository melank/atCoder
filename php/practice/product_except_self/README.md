# 自分以外の積

**難易度**: ★★☆☆☆（初級）

**カテゴリ**: 配列操作（累積積）

## 問題

整数配列 `nums` が与えられます。

各位置 `i` について、`nums[i]` **以外** のすべての要素の積を計算し、結果の配列を返してください。

**重要**: 割り算を使わずに解いてください。

## 入力

```
N
a_1 a_2 ... a_N
```

- 1 行目: 配列の要素数 `N`
- 2 行目: 配列の要素（スペース区切り）

## 出力

各位置について「自分以外の積」を計算した結果を、スペース区切りで 1 行で出力してください。

## 制約

- `2 <= N <= 10^5`
- `-30 <= a_i <= 30`
- すべての「自分以外の積」は 32 ビット整数に収まることが保証される

## 入出力例

### 例 1

**入力**
```
4
1 2 3 4
```

**出力**
```
24 12 8 6
```

**説明**
- `i=0`: 2 × 3 × 4 = 24
- `i=1`: 1 × 3 × 4 = 12
- `i=2`: 1 × 2 × 4 = 8
- `i=3`: 1 × 2 × 3 = 6

### 例 2

**入力**
```
5
-1 1 0 -3 3
```

**出力**
```
0 0 9 0 0
```

**説明**
- `i=0`: 1 × 0 × (-3) × 3 = 0
- `i=1`: (-1) × 0 × (-3) × 3 = 0
- `i=2`: (-1) × 1 × (-3) × 3 = 9
- `i=3`: (-1) × 1 × 0 × 3 = 0
- `i=4`: (-1) × 1 × 0 × (-3) = 0

### 例 3

**入力**
```
2
3 5
```

**出力**
```
5 3
```

**説明**
- `i=0`: 5
- `i=1`: 3

### 例 4

**入力**
```
3
2 2 2
```

**出力**
```
4 4 4
```

**説明**
- 各位置で 2 × 2 = 4

### 例 5

**入力**
```
4
1 -1 1 -1
```

**出力**
```
1 -1 1 -1
```

**説明**
- `i=0`: (-1) × 1 × (-1) = 1
- `i=1`: 1 × 1 × (-1) = -1
- `i=2`: 1 × (-1) × (-1) = 1
- `i=3`: 1 × (-1) × 1 = -1

## ヒント

### 素朴な解法（TLE）

各位置について、他のすべての要素を掛け合わせる → O(N²)

### 効率的な解法

**前からの累積積** と **後ろからの累積積** を使います。

1. `prefix[i]` = `nums[0] × nums[1] × ... × nums[i-1]`（`i` より左の積）
2. `suffix[i]` = `nums[i+1] × nums[i+2] × ... × nums[n-1]`（`i` より右の積）
3. `answer[i]` = `prefix[i] × suffix[i]`

### 計算量

- 時間: O(N)
- 空間: O(N)（出力配列を除けば O(1) も可能）
